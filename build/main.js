webpackJsonp([0],{118:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=118},119:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=119},120:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=120},125:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=125},127:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=127},128:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=128},132:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=132},190:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=190},191:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=191},192:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=192},205:function(n,e){function t(n){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+n+"'.")})}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=205},206:function(n,e){function t(n){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+n+"'.")})}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=206},26:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=26},283:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=283},287:function(n,e){function t(n){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+n+"'.")})}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=287},291:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=291},293:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=293},294:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=294},314:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=314},323:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=323},325:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=325},326:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=326},329:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=329},33:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=33},336:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=336},34:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=34},340:function(n,e,t){"use strict";function o(n,e,t,o,r,l,i){return x(this,void 0,void 0,function(){var u,a,s,d,c,f,p;return E(this,function(m){switch(m.label){case 0:return document.querySelector(n).innerHTML="<span>a="+e.a.toFixed(3)+", b="+e.b.toFixed(3)+", c="+e.c.toFixed(3)+",  d="+e.d.toFixed(3)+"</span>",i?[4,o.data()]:[3,2];case 1:return a=m.sent(),[3,3];case 2:a=o,m.label=3;case 3:return u=a,i?[4,r.data()]:[3,5];case 4:return d=m.sent(),[3,6];case 5:d=r,m.label=6;case 6:return s=d,i?[4,l.data()]:[3,8];case 7:return f=m.sent(),[3,9];case 8:f=l,m.label=9;case 9:return c=f,p=Array.from(s).map(function(n,e){return{x:u[e],y:s[e],pred:c[e]}}),[2,Object(g.default)(t,{$schema:"https://vega.github.io/schema/vega-lite/v2.json",width:300,height:300,data:{values:p},layer:[{mark:"point",encoding:{x:{field:"x",type:"quantitative"},y:{field:"y",type:"quantitative"}}},{mark:"line",encoding:{x:{field:"x",type:"quantitative"},y:{field:"pred",type:"quantitative"},color:{value:"tomato"}}}]},{actions:!1})]}})})}function r(n,e,t){for(var o=n.shape[0];t.firstChild;)t.removeChild(t.firstChild);for(var r,l=0;l<o;l++){var i=n.slice([l,0],[1,n.shape[1]]);l%8==0&&(r=document.createElement("div"));var u=document.createElement("span");u.className="pred-container";var a=document.createElement("canvas");!function(n,e){var t=[28,28],o=t[0],r=t[1];e.width=o,e.height=r;for(var l=e.getContext("2d"),i=new ImageData(o,r),u=n.dataSync(),a=0;a<r*o;++a){var s=4*a;i.data[s+0]=255*u[a],i.data[s+1]=255*u[a],i.data[s+2]=255*u[a],i.data[s+3]=255}l.putImageData(i,0,0)}(i.flatten(),a);var s=document.createElement("div");s.innerText=" ? "+e[l]+" ? ",u.appendChild(s),u.appendChild(a),r.appendChild(u),l%8==0&&t.appendChild(r)}}function l(n){return a["ɵvid"](0,[(n()(),a["ɵeld"](0,0,null,null,2,"ion-nav",[],null,null,null,G.b,G.a)),a["ɵprd"](6144,null,H.RootNode,null,[z.Nav]),a["ɵdid"](2,4374528,null,0,z.Nav,[[2,q.ViewController],[2,Z.NavController],j.App,K.Config,V.Platform,a.ElementRef,a.NgZone,a.Renderer,a.ComponentFactoryResolver,J.GestureController,W.TransitionController,[2,$.DeepLinker],Q.DomController,a.ErrorHandler],{root:[0,"root"]},null),(n()(),a["ɵted"](-1,null,["\n"]))],function(n,e){n(e,2,0,e.component.rootPage)},null)}function i(n){return a["ɵvid"](0,[a["ɵqud"](402653184,1,{images:0}),(n()(),a["ɵeld"](1,0,null,null,27,"ion-header",[],null,null,null,null,null)),a["ɵdid"](2,16384,null,0,nn.Header,[K.Config,a.ElementRef,a.Renderer,[2,q.ViewController]],null,null),(n()(),a["ɵted"](-1,null,["\n\n  "])),(n()(),a["ɵeld"](4,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,en.b,en.a)),a["ɵdid"](5,49152,null,0,tn.Navbar,[j.App,[2,q.ViewController],[2,Z.NavController],K.Config,a.ElementRef,a.Renderer],null,null),(n()(),a["ɵted"](-1,3,["\n    "])),(n()(),a["ɵeld"](7,0,null,3,2,"ion-title",[],null,null,null,on.b,on.a)),a["ɵdid"](8,49152,null,0,rn.ToolbarTitle,[K.Config,a.ElementRef,a.Renderer,[2,ln.Toolbar],[2,tn.Navbar]],null,null),(n()(),a["ɵted"](-1,0,["\n      TensorFlow.js\n    "])),(n()(),a["ɵted"](-1,3,["\n  "])),(n()(),a["ɵted"](-1,null,["\n\n  "])),(n()(),a["ɵeld"](12,0,null,null,15,"ion-toolbar",[["class","toolbar"]],[[2,"statusbar-padding",null]],null,null,un.b,un.a)),a["ɵdid"](13,49152,null,0,ln.Toolbar,[K.Config,a.ElementRef,a.Renderer],null,null),(n()(),a["ɵted"](-1,3,["\n    "])),(n()(),a["ɵeld"](15,0,null,3,11,"ion-buttons",[],null,null,null,null,null)),a["ɵdid"](16,16384,null,1,an.ToolbarItem,[K.Config,a.ElementRef,a.Renderer,[2,ln.Toolbar],[2,tn.Navbar]],null,null),a["ɵqud"](603979776,2,{_buttons:1}),(n()(),a["ɵted"](-1,null,["\n      "])),(n()(),a["ɵeld"](19,0,null,null,2,"button",[["ion-button",""],["small",""]],null,[[null,"click"]],function(n,e,t){var o=!0;if("click"===e){o=!1!==n.component.coefficients()&&o}return o},sn.b,sn.a)),a["ɵdid"](20,1097728,[[2,4]],0,dn.Button,[[8,""],K.Config,a.ElementRef,a.Renderer],{small:[0,"small"]},null),(n()(),a["ɵted"](-1,0,["A"])),(n()(),a["ɵted"](-1,null,["\n      "])),(n()(),a["ɵeld"](23,0,null,null,2,"button",[["ion-button",""],["small",""]],null,[[null,"click"]],function(n,e,t){var o=!0;if("click"===e){o=!1!==n.component.mnist()&&o}return o},sn.b,sn.a)),a["ɵdid"](24,1097728,[[2,4]],0,dn.Button,[[8,""],K.Config,a.ElementRef,a.Renderer],{small:[0,"small"]},null),(n()(),a["ɵted"](-1,0,["B"])),(n()(),a["ɵted"](-1,null,["\n    "])),(n()(),a["ɵted"](-1,3,["\n  "])),(n()(),a["ɵted"](-1,null,["\n\n"])),(n()(),a["ɵted"](-1,null,["\n\n"])),(n()(),a["ɵeld"](30,0,null,null,52,"ion-content",[["padding",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,cn.b,cn.a)),a["ɵdid"](31,4374528,null,0,fn.Content,[K.Config,V.Platform,Q.DomController,a.ElementRef,a.Renderer,j.App,pn.Keyboard,a.NgZone,[2,q.ViewController],[2,Z.NavController]],null,null),(n()(),a["ɵted"](-1,1,["\n  "])),(n()(),a["ɵeld"](33,0,null,1,4,"ion-input",[["placeholder","id"],["type","number"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,e,t){var o=!0;if("ngModelChange"===e){o=!1!==(n.component.model_id=t)&&o}return o},mn.b,mn.a)),a["ɵdid"](34,671744,null,0,hn.NgModel,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),a["ɵprd"](2048,null,hn.NgControl,null,[hn.NgModel]),a["ɵdid"](36,16384,null,0,hn.NgControlStatus,[hn.NgControl],null,null),a["ɵdid"](37,5423104,null,0,vn.TextInput,[K.Config,V.Platform,yn.Form,j.App,a.ElementRef,a.Renderer,[2,fn.Content],[2,Cn.Item],[2,hn.NgControl],Q.DomController],{type:[0,"type"],placeholder:[1,"placeholder"]},null),(n()(),a["ɵted"](-1,1,["\n  "])),(n()(),a["ɵeld"](39,0,null,1,2,"button",[["ion-button",""],["small",""]],null,[[null,"click"]],function(n,e,t){var o=!0;if("click"===e){o=!1!==n.component.getmodel()&&o}return o},sn.b,sn.a)),a["ɵdid"](40,1097728,null,0,dn.Button,[[8,""],K.Config,a.ElementRef,a.Renderer],{small:[0,"small"]},null),(n()(),a["ɵted"](-1,0,["Get Model"])),(n()(),a["ɵted"](-1,1,["\n  "])),(n()(),a["ɵeld"](43,0,null,1,0,"br",[],null,null,null,null,null)),(n()(),a["ɵted"](44,1,["\n  TensorFlow says ","\n  "])),(n()(),a["ɵeld"](45,0,null,1,1,"ion-input",[["placeholder","number"],["type","number"]],null,[[null,"ionChange"]],function(n,e,t){var o=!0;if("ionChange"===e){o=!1!==n.component.predict(t)&&o}return o},mn.b,mn.a)),a["ɵdid"](46,5423104,null,0,vn.TextInput,[K.Config,V.Platform,yn.Form,j.App,a.ElementRef,a.Renderer,[2,fn.Content],[2,Cn.Item],[2,hn.NgControl],Q.DomController],{type:[0,"type"],placeholder:[1,"placeholder"]},{ionChange:"ionChange"}),(n()(),a["ɵted"](-1,1,["\n\n  "])),(n()(),a["ɵeld"](48,0,null,1,13,"section",[],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["\n    "])),(n()(),a["ɵeld"](50,0,null,null,10,"div",[["id","random"]],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["\n      "])),(n()(),a["ɵeld"](52,0,null,null,1,"div",[["class","caption"]],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["Fit curve with random coefficients (before training)"])),(n()(),a["ɵted"](-1,null,["\n      "])),(n()(),a["ɵeld"](55,0,null,null,2,"div",[["class","caption"]],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["Random coefficients: "])),(n()(),a["ɵeld"](57,0,null,null,0,"span",[["class","coeff"]],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["\n      "])),(n()(),a["ɵeld"](59,0,null,null,0,"div",[["class","plot"]],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["\n    "])),(n()(),a["ɵted"](-1,null,["\n  "])),(n()(),a["ɵted"](-1,1,["\n\n  "])),(n()(),a["ɵeld"](63,0,null,1,13,"section",[],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["\n    "])),(n()(),a["ɵeld"](65,0,null,null,10,"div",[["id","trained"]],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["\n      "])),(n()(),a["ɵeld"](67,0,null,null,1,"div",[["class","caption"]],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["Fit curve with learned coefficients (after training)"])),(n()(),a["ɵted"](-1,null,["\n      "])),(n()(),a["ɵeld"](70,0,null,null,2,"div",[["class","caption"]],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["Learned coefficients: "])),(n()(),a["ɵeld"](72,0,null,null,0,"span",[["class","coeff"]],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["\n      "])),(n()(),a["ɵeld"](74,0,null,null,0,"div",[["class","plot"]],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["\n    "])),(n()(),a["ɵted"](-1,null,["\n  "])),(n()(),a["ɵted"](-1,1,["\n\n  "])),(n()(),a["ɵeld"](78,0,null,1,3,"section",[],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["\n    "])),(n()(),a["ɵeld"](80,0,[[1,0],["images",1]],null,0,"div",[],null,null,null,null,null)),(n()(),a["ɵted"](-1,null,["\n  "])),(n()(),a["ɵted"](-1,1,["\n\n"]))],function(n,e){var t=e.component;n(e,20,0,"");n(e,24,0,"");n(e,34,0,t.model_id);n(e,37,0,"number","id");n(e,40,0,"");n(e,46,0,"number","number")},function(n,e){var t=e.component;n(e,4,0,a["ɵnov"](e,5)._hidden,a["ɵnov"](e,5)._sbPadding);n(e,12,0,a["ɵnov"](e,13)._sbPadding);n(e,30,0,a["ɵnov"](e,31).statusbarPadding,a["ɵnov"](e,31)._hasRefresher);n(e,33,0,a["ɵnov"](e,36).ngClassUntouched,a["ɵnov"](e,36).ngClassTouched,a["ɵnov"](e,36).ngClassPristine,a["ɵnov"](e,36).ngClassDirty,a["ɵnov"](e,36).ngClassValid,a["ɵnov"](e,36).ngClassInvalid,a["ɵnov"](e,36).ngClassPending);n(e,44,0,t.prediction)})}Object.defineProperty(e,"__esModule",{value:!0});var u=t(36),a=t(0),s=(t(2),t(138),t(98)),d=t(99),c=t(100),f=function(){function n(n,e,t,o){this.a=n,this.b=e,this.c=t,this.d=o}return n.prototype.y=function(n){var e=this;return c.tidy(function(){return e.a.mul(n.pow(c.scalar(3,"int32"))).add(e.b.mul(n.square())).add(e.c.mul(n)).add(e.d)})},n.prototype.generateData=function(n,e,t){return void 0===t&&(t=.04),c.tidy(function(){var o=[c.scalar(e.a),c.scalar(e.b),c.scalar(e.c),c.scalar(e.d)],r=o[0],l=o[1],i=o[2],u=o[3],a=c.randomUniform([n],-1,1),s=r.mul(a.pow(c.scalar(3,"int32"))).add(l.mul(a.square())).add(i.mul(a)).add(u).add(c.randomNormal([n],0,t)),d=s.min(),f=s.max().sub(d);return{xs:a,ys:s.sub(d).div(f)}})},n.prototype.loss_learnCoefficients=function(n,e){return this.y(n).sub(e).square().mean().asScalar()},n}(),p=this&&this.__awaiter||function(n,e,t,o){return new(t||(t=Promise))(function(r,l){function i(n){try{a(o.next(n))}catch(n){l(n)}}function u(n){try{a(o.throw(n))}catch(n){l(n)}}function a(n){n.done?r(n.value):new t(function(e){e(n.value)}).then(i,u)}a((o=o.apply(n,e||[])).next())})},m=this&&this.__generator||function(n,e){function t(t){return function(i){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,r&&(l=2&t[0]?r.return:t[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,t[1])).done)return l;switch(r=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,r=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(l=u.trys,!(l=l.length>0&&l[l.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){u.label=t[1];break}if(6===t[0]&&u.label<l[1]){u.label=l[1],l=t;break}if(l&&u.label<l[2]){u.label=l[2],u.ops.push(t);break}l[2]&&u.ops.pop(),u.trys.pop();continue}t=e.call(n,u)}catch(n){t=[6,n],r=0}finally{o=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,i])}}var o,r,l,i,u={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return i={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},h=c.variable(c.randomNormal([5,5,1,8],0,.1)),v=c.variable(c.randomNormal([5,5,8,16],0,.1)),y=c.variable(c.randomNormal([784,10],0,1/Math.sqrt(784))),C=c.variable(c.zeros([10])),w=function(){function n(){this.x=[0,1,2,3,4,5,6,7,8,9],this.shuffledTrainIndex=0,this.shuffledTestIndex=0}return n.prototype.test=function(n){var e=this.predict(n.xs),t=this.classesFromLabel(n.labels);return this.countTrain({predictionsIndex:e,labelsIndex:t}),{xs:n.xs,predictionsIndex:e}},n.prototype.predict=function(n){var e=this,t=c.tidy(function(){return e.model(n).argMax(1)});return Array.from(t.dataSync())},n.prototype.model=function(n){var e=n.as4D(-1,28,28,1),t=c.tidy(function(){return e.conv2d(h,1,"same").relu().maxPool([2,2],2,0)});return c.tidy(function(){return t.conv2d(v,1,"same").relu().maxPool([2,2],2,0)}).as2D(-1,y.shape[0]).matMul(y).add(C)},n.prototype.classesFromLabel=function(n){var e=n.argMax(1);return Array.from(e.dataSync())},n.prototype.countTrain=function(n){this.realCount=[0,0,0,0,0,0,0,0,0,0],this.predictCount=[0,0,0,0,0,0,0,0,0,0];for(var e=0;e<64;e++)this.realCount[n.labelsIndex[e]]++,n.predictionsIndex[e]==n.labelsIndex[e]&&this.predictCount[n.labelsIndex[e]]++},n.prototype.load=function(){return p(this,void 0,void 0,function(){var n,e,t,o,r,l,i=this;return m(this,function(u){switch(u.label){case 0:return n=new Image,e=document.createElement("canvas"),t=e.getContext("2d"),new Promise(function(o,r){n.crossOrigin="",n.onload=function(){n.width=n.naturalWidth,n.height=n.naturalHeight;var r=new ArrayBuffer(20384e4);e.width=n.width,e.height=5e3;for(var l=0;l<13;l++){var u=new Float32Array(r,784*l*5e3*4,392e4);t.drawImage(n,0,5e3*l,n.width,5e3,0,0,n.width,5e3);for(var a=t.getImageData(0,0,e.width,e.height),s=0;s<a.data.length/4;s++)u[s]=a.data[4*s]/255}i.datasetImages=new Float32Array(r),o()},n.src="https://storage.googleapis.com/learnjs-data/model-builder/mnist_images.png"}),[4,fetch("https://storage.googleapis.com/learnjs-data/model-builder/mnist_labels_uint8")];case 1:return o=u.sent(),r=this,l=Uint8Array.bind,[4,o.arrayBuffer()];case 2:return r.datasetLabels=new(l.apply(Uint8Array,[void 0,u.sent()])),this.trainImages=this.datasetImages.slice(0,4312e4),this.trainLabels=this.datasetLabels.slice(0,55e4),this.trainIndices=c.util.createShuffledIndices(55e3),this.testImages=this.datasetImages.slice(4312e4),this.testLabels=this.datasetLabels.slice(55e4),this.testIndices=c.util.createShuffledIndices(1e4),[2]}})})},n.prototype.nextTrainBatch=function(){var n=this;return this.nextBatch([this.trainImages,this.trainLabels],function(){return n.shuffledTrainIndex=(n.shuffledTrainIndex+1)%n.trainIndices.length,n.trainIndices[n.shuffledTrainIndex]})},n.prototype.nextTestBatch=function(){var n=this;return this.nextBatch([this.testImages,this.testLabels],function(){return n.shuffledTestIndex=(n.shuffledTestIndex+1)%n.testIndices.length,n.testIndices[n.shuffledTestIndex]})},n.prototype.nextBatch=function(n,e){for(var t=new Float32Array(50176),o=new Uint8Array(640),r=0;r<64;r++){var l=e(),i=n[0].slice(784*l,784*l+784);t.set(i,784*r);var u=n[1].slice(10*l,10*l+10);o.set(u,10*r)}return{xs:c.tensor2d(t,[64,784]),labels:c.tensor2d(o,[64,10])}},n.prototype.loss_mnist=function(n){return c.losses.softmaxCrossEntropy(n.labels,this.model(n.xs)).mean().asScalar()},n}(),g=t(66),b=t(470),x=this&&this.__awaiter||function(n,e,t,o){return new(t||(t=Promise))(function(r,l){function i(n){try{a(o.next(n))}catch(n){l(n)}}function u(n){try{a(o.throw(n))}catch(n){l(n)}}function a(n){n.done?r(n.value):new t(function(e){e(n.value)}).then(i,u)}a((o=o.apply(n,e||[])).next())})},E=this&&this.__generator||function(n,e){function t(t){return function(i){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,r&&(l=2&t[0]?r.return:t[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,t[1])).done)return l;switch(r=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,r=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(l=u.trys,!(l=l.length>0&&l[l.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){u.label=t[1];break}if(6===t[0]&&u.label<l[1]){u.label=l[1],l=t;break}if(l&&u.label<l[2]){u.label=l[2],u.ops.push(t);break}l[2]&&u.ops.pop(),u.trys.pop();continue}t=e.call(n,u)}catch(n){t=[6,n],r=0}finally{o=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,i])}}var o,r,l,i,u={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return i={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},k=[],I=this&&this.__awaiter||function(n,e,t,o){return new(t||(t=Promise))(function(r,l){function i(n){try{a(o.next(n))}catch(n){l(n)}}function u(n){try{a(o.throw(n))}catch(n){l(n)}}function a(n){n.done?r(n.value):new t(function(e){e(n.value)}).then(i,u)}a((o=o.apply(n,e||[])).next())})},M=this&&this.__generator||function(n,e){function t(t){return function(i){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,r&&(l=2&t[0]?r.return:t[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,t[1])).done)return l;switch(r=0,l&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,r=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(l=u.trys,!(l=l.length>0&&l[l.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){u.label=t[1];break}if(6===t[0]&&u.label<l[1]){u.label=l[1],l=t;break}if(l&&u.label<l[2]){u.label=l[2],u.ops.push(t);break}l[2]&&u.ops.pop(),u.trys.pop();continue}t=e.call(n,u)}catch(n){t=[6,n],r=0}finally{o=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,i])}}var o,r,l,i,u={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return i={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},T=function(){function n(n){this.navCtrl=n,this.numIterations=80,this.optimizer=c.train.sgd(.3),this.model_id=1234}return n.prototype.getmodel=function(){this.train()},n.prototype.train=function(){return I(this,void 0,void 0,function(){var n,e,t,o,r,l;return M(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,11]),n=this,[4,c.loadModel("http://socialwebapi320171216052323.azurewebsites.net/api/DownloadModel?id="+this.model_id)];case 1:return n.linearModel=i.sent(),this.prediction="Load OK",[3,11];case 2:e=i.sent(),this.prediction="loadModel "+e.message,this.linearModel=c.sequential(),this.linearModel.add(c.layers.dense({units:1,inputShape:[1]})),i.label=3;case 3:return i.trys.push([3,9,,10]),this.linearModel.compile({loss:"meanSquaredError",optimizer:"sgd"}),t=c.tensor1d([1,2,3]),o=c.tensor1d([1,4,9]),[4,this.linearModel.fit(t,o)];case 4:i.sent(),this.prediction+=" Train OK",i.label=5;case 5:return i.trys.push([5,7,,8]),[4,this.linearModel.save("http://socialwebapi320171216052323.azurewebsites.net/api/Employees?id="+this.model_id)];case 6:return i.sent(),this.prediction+=" Save OK",[3,8];case 7:return r=i.sent(),this.prediction+=" save "+r.message,[3,8];case 8:return[3,10];case 9:return l=i.sent(),this.prediction+=" train "+l.message,[3,10];case 10:return[3,11];case 11:return[2]}})})},n.prototype.predict=function(n){var e=new Float32Array(1);e[0]=n.value;var t=this.linearModel.predict(c.tensor2d(e,[1,1],"float32"));this.prediction=Array.from(t.dataSync())[0]},n.prototype.coefficients=function(){return I(this,void 0,void 0,function(){var n,e,t,r,l,i,u;return M(this,function(a){switch(a.label){case 0:return n=new f(c.variable(c.scalar(0)),c.variable(c.scalar(0)),c.variable(c.scalar(0)),c.variable(c.scalar(.5))),e={a:-.8,b:-.2,c:.9,d:.5},t=n.generateData(100,e),r=n.y(t.xs),[4,o("#random .coeff",{a:n.a.dataSync()[0],b:n.b.dataSync()[0],c:n.c.dataSync()[0],d:n.d.dataSync()[0]},"#random .plot",t.xs,t.ys,r,!0)];case 1:a.sent(),r.dispose(),l=0,a.label=2;case 2:return l<this.numIterations?(i=this.optimizer.minimize(function(){return n.loss_learnCoefficients(t.xs,t.ys)},!0),function(n,e){k.push({x:e,y:n}),b.render.linechart({values:k,series:["loss"]},{name:"Loss",tab:"Training"},{xLabel:"Training Step",yLavel:"Loss"})}(i.dataSync(),l),[4,c.nextFrame()]):[3,5];case 3:a.sent(),a.label=4;case 4:return l++,[3,2];case 5:return u=n.y(t.xs),[4,o("#trained .coeff",{a:n.a.dataSync()[0],b:n.b.dataSync()[0],c:n.c.dataSync()[0],d:n.d.dataSync()[0]},"#trained .plot",t.xs,t.ys,u,!0)];case 6:return a.sent(),u.dispose(),[2]}})})},n.prototype.mnist=function(){return I(this,void 0,void 0,function(){var n,e,t,l;return M(this,function(i){switch(i.label){case 0:return n=new w,[4,n.load()];case 1:i.sent(),r((e=n.test(n.nextTestBatch())).xs,e.predictionsIndex,this.images.nativeElement),o("#random .coeff",{a:0,b:0,c:0,d:0},"#random .plot",n.x,n.realCount,n.predictCount,!1),t=0,i.label=2;case 2:return t<this.numIterations?(this.optimizer.minimize(function(){return n.loss_mnist(n.nextTrainBatch())},!0),[4,c.nextFrame()]):[3,5];case 3:i.sent(),i.label=4;case 4:return t++,[3,2];case 5:return l=n.test(n.nextTestBatch()),r(l.xs,l.predictionsIndex,this.images.nativeElement),o("#trained .coeff",{a:0,b:0,c:0,d:0},"#trained .plot",n.x,n.realCount,n.predictCount,!1),[2]}})})},n}(),A=function(){return function(n,e,t){this.rootPage=T,n.ready().then(function(){e.styleDefault(),t.hide()})}}(),P=function(){return function(){}}(),S=t(116),N=t(635),R=t(639),L=t(640),D=t(641),_=t(643),F=t(644),B=t(646),O=t(647),U=t(652),G=t(653),H=t(75),z=t(126),q=t(6),Z=t(31),j=t(11),K=t(3),V=t(5),J=t(10),W=t(46),$=t(24),Q=t(12),X=a["ɵcrt"]({encapsulation:2,styles:[],data:{}}),Y=a["ɵccf"]("ng-component",A,function(n){return a["ɵvid"](0,[(n()(),a["ɵeld"](0,0,null,null,1,"ng-component",[],null,null,null,l,X)),a["ɵdid"](1,49152,null,0,A,[V.Platform,d.a,s.a],null,null)],null,null)},{},{},[]),nn=t(295),en=t(655),tn=t(61),on=t(656),rn=t(186),ln=t(76),un=t(657),an=t(297),sn=t(47),dn=t(27),cn=t(658),fn=t(35),pn=t(59),mn=t(659),hn=t(13),vn=t(187),yn=t(22),Cn=t(25),wn=a["ɵcrt"]({encapsulation:2,styles:[],data:{}}),gn=a["ɵccf"]("page-home",T,function(n){return a["ɵvid"](0,[(n()(),a["ɵeld"](0,0,null,null,1,"page-home",[],null,null,null,i,wn)),a["ɵdid"](1,49152,null,0,T,[Z.NavController],null,null)],null,null)},{},{},[]),bn=t(16),xn=t(299),En=t(300),kn=t(302),In=t(304),Mn=t(58),Tn=t(305),An=t(665),Pn=t(117),Sn=t(73),Nn=t(316),Rn=t(188),Ln=t(321),Dn=t(308),_n=t(335),Fn=t(738),Bn=t(306),On=t(70),Un=t(178),Gn=t(311),Hn=a["ɵcmf"](P,[S.IonicApp],function(n){return a["ɵmod"]([a["ɵmpd"](512,a.ComponentFactoryResolver,a["ɵCodegenComponentFactoryResolver"],[[8,[N.a,R.a,L.a,D.a,_.a,F.a,B.a,O.a,U.a,Y,gn]],[3,a.ComponentFactoryResolver],a.NgModuleRef]),a["ɵmpd"](5120,a.LOCALE_ID,a["ɵq"],[[3,a.LOCALE_ID]]),a["ɵmpd"](4608,bn.NgLocalization,bn.NgLocaleLocalization,[a.LOCALE_ID,[2,bn["ɵa"]]]),a["ɵmpd"](5120,a.APP_ID,a["ɵi"],[]),a["ɵmpd"](5120,a.IterableDiffers,a["ɵn"],[]),a["ɵmpd"](5120,a.KeyValueDiffers,a["ɵo"],[]),a["ɵmpd"](4608,u.DomSanitizer,u["ɵe"],[bn.DOCUMENT]),a["ɵmpd"](6144,a.Sanitizer,null,[u.DomSanitizer]),a["ɵmpd"](4608,u.HAMMER_GESTURE_CONFIG,xn.IonicGestureConfig,[]),a["ɵmpd"](5120,u.EVENT_MANAGER_PLUGINS,function(n,e,t,o,r){return[new u["ɵDomEventsPlugin"](n,e),new u["ɵKeyEventsPlugin"](t),new u["ɵHammerGesturesPlugin"](o,r)]},[bn.DOCUMENT,a.NgZone,bn.DOCUMENT,bn.DOCUMENT,u.HAMMER_GESTURE_CONFIG]),a["ɵmpd"](4608,u.EventManager,u.EventManager,[u.EVENT_MANAGER_PLUGINS,a.NgZone]),a["ɵmpd"](135680,u["ɵDomSharedStylesHost"],u["ɵDomSharedStylesHost"],[bn.DOCUMENT]),a["ɵmpd"](4608,u["ɵDomRendererFactory2"],u["ɵDomRendererFactory2"],[u.EventManager,u["ɵDomSharedStylesHost"]]),a["ɵmpd"](6144,a.RendererFactory2,null,[u["ɵDomRendererFactory2"]]),a["ɵmpd"](6144,u["ɵSharedStylesHost"],null,[u["ɵDomSharedStylesHost"]]),a["ɵmpd"](4608,a.Testability,a.Testability,[a.NgZone]),a["ɵmpd"](4608,u.Meta,u.Meta,[bn.DOCUMENT]),a["ɵmpd"](4608,u.Title,u.Title,[bn.DOCUMENT]),a["ɵmpd"](4608,hn["ɵi"],hn["ɵi"],[]),a["ɵmpd"](4608,hn.FormBuilder,hn.FormBuilder,[]),a["ɵmpd"](4608,En.ActionSheetController,En.ActionSheetController,[j.App,K.Config]),a["ɵmpd"](4608,kn.AlertController,kn.AlertController,[j.App,K.Config]),a["ɵmpd"](4608,In.Events,In.Events,[]),a["ɵmpd"](4608,yn.Form,yn.Form,[]),a["ɵmpd"](4608,Mn.Haptic,Mn.Haptic,[V.Platform]),a["ɵmpd"](4608,pn.Keyboard,pn.Keyboard,[K.Config,V.Platform,a.NgZone,Q.DomController]),a["ɵmpd"](4608,Tn.LoadingController,Tn.LoadingController,[j.App,K.Config]),a["ɵmpd"](5120,bn.LocationStrategy,An.provideLocationStrategy,[bn.PlatformLocation,[2,bn.APP_BASE_HREF],K.Config]),a["ɵmpd"](4608,bn.Location,bn.Location,[bn.LocationStrategy]),a["ɵmpd"](5120,Pn.UrlSerializer,Pn.setupUrlSerializer,[j.App,Pn.DeepLinkConfigToken]),a["ɵmpd"](5120,$.DeepLinker,$.setupDeepLinker,[j.App,Pn.UrlSerializer,bn.Location,Sn.ModuleLoader,a.ComponentFactoryResolver]),a["ɵmpd"](4608,Nn.ModalController,Nn.ModalController,[j.App,K.Config,$.DeepLinker]),a["ɵmpd"](4608,Rn.PickerController,Rn.PickerController,[j.App,K.Config]),a["ɵmpd"](4608,Ln.PopoverController,Ln.PopoverController,[j.App,K.Config,$.DeepLinker]),a["ɵmpd"](4608,Dn.TapClick,Dn.TapClick,[K.Config,V.Platform,Q.DomController,j.App,J.GestureController]),a["ɵmpd"](4608,_n.ToastController,_n.ToastController,[j.App,K.Config]),a["ɵmpd"](4608,W.TransitionController,W.TransitionController,[V.Platform,K.Config]),a["ɵmpd"](4608,d.a,d.a,[]),a["ɵmpd"](4608,s.a,s.a,[]),a["ɵmpd"](512,bn.CommonModule,bn.CommonModule,[]),a["ɵmpd"](512,a.ErrorHandler,Fn.IonicErrorHandler,[]),a["ɵmpd"](256,K.ConfigToken,{},[]),a["ɵmpd"](1024,Bn.PlatformConfigToken,Bn.providePlatformConfigs,[]),a["ɵmpd"](1024,V.Platform,V.setupPlatform,[u.DOCUMENT,Bn.PlatformConfigToken,a.NgZone]),a["ɵmpd"](1024,K.Config,K.setupConfig,[K.ConfigToken,V.Platform]),a["ɵmpd"](512,Q.DomController,Q.DomController,[V.Platform]),a["ɵmpd"](512,On.MenuController,On.MenuController,[]),a["ɵmpd"](512,j.App,j.App,[K.Config,V.Platform,[2,On.MenuController]]),a["ɵmpd"](512,J.GestureController,J.GestureController,[j.App]),a["ɵmpd"](256,Pn.DeepLinkConfigToken,{links:[]},[]),a["ɵmpd"](512,a.Compiler,a.Compiler,[]),a["ɵmpd"](512,Un.NgModuleLoader,Un.NgModuleLoader,[a.Compiler]),a["ɵmpd"](1024,Sn.ModuleLoader,Sn.provideModuleLoader,[Un.NgModuleLoader,a.Injector]),a["ɵmpd"](1024,a.APP_INITIALIZER,function(n,e,t,o,r,l,i,a,s,d,c,f,p){return[u["ɵh"](n),Gn.registerModeConfigs(e),In.setupProvideEvents(t,o),Dn.setupTapClick(r,l,i,a,s),Sn.setupPreloading(d,c,f,p)]},[[2,a.NgProbeToken],K.Config,V.Platform,Q.DomController,K.Config,V.Platform,Q.DomController,j.App,J.GestureController,K.Config,Pn.DeepLinkConfigToken,Sn.ModuleLoader,a.NgZone]),a["ɵmpd"](512,a.ApplicationInitStatus,a.ApplicationInitStatus,[[2,a.APP_INITIALIZER]]),a["ɵmpd"](131584,a.ApplicationRef,a.ApplicationRef,[a.NgZone,a["ɵConsole"],a.Injector,a.ErrorHandler,a.ComponentFactoryResolver,a.ApplicationInitStatus]),a["ɵmpd"](512,a.ApplicationModule,a.ApplicationModule,[a.ApplicationRef]),a["ɵmpd"](512,u.BrowserModule,u.BrowserModule,[[3,u.BrowserModule]]),a["ɵmpd"](512,hn["ɵba"],hn["ɵba"],[]),a["ɵmpd"](512,hn.FormsModule,hn.FormsModule,[]),a["ɵmpd"](512,hn.ReactiveFormsModule,hn.ReactiveFormsModule,[]),a["ɵmpd"](512,An.IonicModule,An.IonicModule,[]),a["ɵmpd"](512,P,P,[]),a["ɵmpd"](256,S.AppRootToken,A,[]),a["ɵmpd"](256,bn.APP_BASE_HREF,"/",[])])});Object(a.enableProdMode)(),Object(u.platformBrowser)().bootstrapModuleFactory(Hn)},376:function(n,e){},378:function(n,e){},41:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=41},410:function(n,e){},411:function(n,e){},44:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=44},460:function(n,e){},461:function(n,e){},57:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=57},60:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=60},628:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=628},631:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=631},636:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=636},637:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=637},638:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=638},642:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=642},648:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=648},650:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=650},654:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=654},660:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=660},666:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=666},669:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=669},671:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=671},677:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=677},679:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=679},681:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=681},69:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=69},690:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=690},705:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=705},706:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=706},71:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=71},713:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=713},715:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=715},728:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=728},735:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=735},74:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=74},92:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=92},93:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=93},94:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=94},95:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=95},96:function(n,e){function t(n){throw new Error("Cannot find module '"+n+"'.")}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id=96}},[340]);